<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Flex Layout Demo</title>
    <link rel="stylesheet" href="demo.css">
    <script src="./theme.js"></script>
    <style>
        html {
            height: 100%;
        }
        body {
            display: flex; flex-direction: column; height: 100%;
            margin: 0 2em 0 2em;
        }
    </style>
</head>
<body>
<h1><a href="index.html">GridChen Index</a> / CSS Flex Layout</h1>
<header>
    This is a vertical flow header taking exactly the size of its content.
    Observe how the grid takes all available space between header and footer on window resize.
    There shall not be a vertical scrollbar, so styles elements like so
    <pre>
        html { height: 100%; }
        body { display: flex; flex-direction: column; height: 100%; margin: 0 2em 0 2em; }
    </pre>
    <div id="rect" style="background-color: red;">
        üûÅüûÉDynamic vertical spacing changes every 2 seconds...
    </div>
</header>
<grid-chen style="flex: 1; margin-left: 2em;"></grid-chen>
<footer>
    This is a vertical flow footer.
</footer>
</body>
<script type="module">
    import "./grid-chen/webcomponent.js"
    import {createView} from "./grid-chen/matrixview.js"

    const schema = {
        title: 'DOMRect Properties', type: 'array',
        items: {
            type: 'array',
            items: [
                {title: 'Property', type: 'string', width: 200},
                {title: 'Value', type: 'number', width: 200}
            ]
        }
    };

    const rows = [];
    const grid = document.querySelector('grid-chen').resetFromView(createView(schema, rows));

    function clientRectPropertiestoMatrix() {
        const rect = grid.getBoundingClientRect();
        rows.length = 0;
        for (let key in rect) {
            if (typeof rect[key] === 'number') {
                rows.push([key, rect[key]]);
            }
        }
    }

    grid._onresize = clientRectPropertiestoMatrix;
    //clientRectPropertiestoMatrix();
    //window.addEventListener('resize', clientRectPropertiestoMatrix);

    window.setInterval(() => {
        document.getElementById('rect').style.height = (20 + Math.random() * 100).toFixed() + 'px';
    }, 2000)

</script>
</html>
