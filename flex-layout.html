<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Flex Layout Demo</title>
    <link rel="stylesheet" href="demo.css">
    <script src="./theme.js"></script>
    <style>
        html {
            height: 100%;
        }
        body {
            display: flex; flex-direction: column; height: 100%; margin: 0;
        }
    </style>
</head>
<body>
<h1><a href="index.html">GridChen Index</a> / CSS Flex Layout</h1>
<header>
    This is a normal vertical box taking exactly the size of its content. Observe how the grid takes all available space between header and footer on window
    resize. There must not be a vertical scrollbar, so styles elements like so
    <pre>
        html {
            height: 100%;
        }
        body {
            display: flex; flex-direction: column; height: 100%; margin: 0;
        }
    </pre>
</header>
<grid-chen style="flex: 1; margin-left: 2em;"></grid-chen>
<footer>
    This is a fixed height footer.
</footer>
</body>
<script type="module">
    import "./grid-chen/webcomponent.js"
    import {createView} from "./grid-chen/matrixview.js"

    const schema = {
        title: 'DOMRect Properties',
        type: 'array',
        items: {
            type: 'array',
            items: [
                {title: 'Property', type: 'string', width: 200},
                {title: 'Value', type: 'number', width: 200}
            ]
        }
    };

    const rows = [];

    function clientRectPropertiestoMatrix() {
        const rect = document.querySelector('grid-chen').getBoundingClientRect();
        rows.length = 0;
        for (let key in rect) {
            if (typeof rect[key] === 'number') {
                rows.push([key, rect[key]]);
            }
        }
    }

    clientRectPropertiestoMatrix();
    document.querySelector('grid-chen').resetFromView(createView(schema, rows));
    window.addEventListener('resize', clientRectPropertiestoMatrix);

</script>
</html>
