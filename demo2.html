<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Default Schema Types</title>

    <style>
        body {
            font-family: sans-serif;
            margin: 2em;
            background-color: aliceblue;
        }

        pre {
            display:inline-block;
            vertical-align: top;
            background-color: floralwhite;
            margin: 0em;
            margin-right: 2em;
            padding: 1em;
        }
    </style>
</head>
<body>

<h1>Default Schema Types</h1>

<div>
    <h2></h2>
    <pre class="schema"></pre>
    <pre class="data"></pre>
    <grid-chen style="display: inline-block; height: 200px;"></grid-chen>
</div>

<script type="module">
    import {} from "./modules/GridChen.js"
    import {createView} from "./modules/DataViews.js"

    const template = document.getElementsByTagName('div')[0];
    Array.from({length: 3}).forEach(() => document.body.appendChild(template.cloneNode(true)));

    function createGrid(schema, data) {
        const container = document.evaluate('//h2[not(text())]', document).iterateNext().parentElement;
        container.querySelector('h2').textContent = schema.title;
        container.querySelector('.schema').textContent = JSON.stringify(schema, null, 4);
        container.querySelector('.data').textContent = JSON.stringify(data, null, 4);
        container.querySelector('grid-chen').resetFromView(createView(schema, data));
    }

    const dates = [new Date("2016-12-31T23:00Z"), new Date("2016-12-31T23:15Z"), new Date("2016-12-31T23:30Z")];

    createGrid(
        {
            title: 'Array of Row Arrays',
            type: 'object',
            items: {
                type: 'object',
                items: [  // tuple schema
                    {title: 'TimeStamp', width: 200, type: 'string', format: 'datetime'},
                    {title: 'Age', width: 100, type: 'number'},
                    {title: 'Weight', width: 100, type: 'number'}
                ]
            }
        },
        [
            [dates[0], 0, 0],
            [dates[1], 1, 2],
            [dates[2], 2, 4]
        ]
    );

    createGrid(
        {
            title: 'Array of Row Objects',
            type: 'object',
            items: {
                type: 'object',
                properties: {
                    timestamp: {title: 'TimeStamp', width: 200, type: 'string', format: 'datetime'},
                    age: {title: 'Age', width: 100, type: 'number'},
                    weight: {title: 'Weight', width: 100, type: 'number'}
                }
            }
        },
        [
            {timestamp: dates[0], age: 0, weight: 0},
            {timestamp: dates[1], age: 1, weight: 2},
            {timestamp: dates[2], age: 2, weight: 4}
        ]
    );

    createGrid(
        {
            title: 'Array of Column Arrays',
            type: 'object',
            items: [ // tuple schema
                {type: 'object', items: {title: 'TimeStamp', width: 200, type: 'string', format: 'datetime'}},
                {type: 'object', items: {title: 'Age', width: 100, type: 'number'}},
                {type: 'object', items: {title: 'Weight', width: 100, type: 'number'}}
            ]
        },
        [
            dates,
            [0, 1, 2],
            [0, 2, 4]
        ]
    );

    createGrid(
        {
            title: 'Array of Column Objects',
            type: 'object',
            properties: {
                timestamp: {type: 'object', items: {title: 'TimeStamp', type: 'string', format: 'datetime', width: 200}},
                weight: {type: 'object', items: {title: 'Age', width: 100, type: 'number'}},
                age: {type: 'object', items: {title: 'Weight', width: 100, type: 'number'}}
            }
        },
        {
            timestamp: dates,
            weight: [0, 1, 2],
            age: [0, 2, 4]
        }
    );

</script>
</body>
</html>