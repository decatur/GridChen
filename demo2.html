<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Default Schema Types</title>

    <style>
        body {
            font-family: sans-serif;
            margin: 2em;
            background-color: aliceblue;
        }

        label {
            display: inline-block;
            vertical-align: top;
        }

        textarea {
            display: block;
            background-color: floralwhite;
            margin: 0 2em 0 0;
            height: 200px;
            width: 90%;
        }

        .patch {
            height: 200px;
            width: 90%;
            overflow: scroll;
        }
    </style>
</head>
<body>

<h1>Default Schema Types</h1>

There are five <em>natural</em> types to express a matrix structure.
All of them are supported by default.

<div>
    These demos are interactive both ways:
    <ul>
        <li>each change in schema or data will reset the grid, and</li>
        <li>each cell change will update the data.</li>
    </ul>
</div>

<div style="display: grid; grid-template-columns: repeat(3, 1fr); grid-auto-rows: auto">

    <div id="template" style="display: contents">
        <h2 style="grid-column: span 3"></h2>
        <label>
            Schema
            <textarea class="schema"></textarea>
        </label>
        <label>
            JavaScript Data
            <textarea class="data"></textarea>
        </label>
        <div>
            JavaScript Patch
            <pre class="patch"></pre>
        </div>
        <div style="grid-column: span 3">
            Grid
            <grid-chen style="display: block; height: 200px;"></grid-chen>
        </div>
    </div>

</div>

<script type="module">
    import "./modules/gridchen/GridChen.js"
    import {DateTimeStringConverter} from './modules/gridchen/converter.js'
    import {createInteractiveDemoGrid} from "./examples/demo.js"

    const template = document.getElementById('template');
    const container = template.parentElement;
    container.removeChild(template);

    const c = new DateTimeStringConverter();
    const dates = ["2019-01-01", "2019-01-02", "2019-01-03"];

    createInteractiveDemoGrid(container.appendChild(template.cloneNode(true)),
        {
            title: 'Array of Row Arrays',
            type: 'object',
            items: {
                type: 'object',
                items: [  // tuple schema
                    {title: 'TimeStamp', width: 200, type: 'string', format: 'full-date'},
                    {title: 'Age', width: 100, type: 'number'},
                    {title: 'Weight', width: 100, type: 'number'}
                ]
            }
        },
        [
            [dates[0], 0, 0],
            [dates[1], 1, 2],
            [dates[2], 2, 4]
        ]
    );

    createInteractiveDemoGrid(container.appendChild(template.cloneNode(true)),
        {
            title: 'Array of Row Objects',
            type: 'object',
            items: {
                type: 'object',
                properties: {
                    timestamp: {title: 'TimeStamp', width: 200, type: 'string', format: 'full-date'},
                    age: {title: 'Age', width: 100, type: 'number'},
                    weight: {title: 'Weight', width: 100, type: 'number'}
                }
            }
        },
        [
            {timestamp: dates[0], age: 0, weight: 0},
            {timestamp: dates[1], age: 1, weight: 2},
            {timestamp: dates[2], age: 2, weight: 4}
        ]
    );

    createInteractiveDemoGrid(container.appendChild(template.cloneNode(true)),
        {
            title: 'Array of Column Array',
            type: 'object',
            items: [ // tuple schema
                {type: 'object', items: {title: 'TimeStamp', width: 200, type: 'string', format: 'full-date'}},
                {type: 'object', items: {title: 'Age', width: 100, type: 'number'}},
                {type: 'object', items: {title: 'Weight', width: 100, type: 'number'}}
            ]
        },
        [
            dates,
            [0, 1, 2],
            [0, 2, 4]
        ]
    );

    createInteractiveDemoGrid(container.appendChild(template.cloneNode(true)),
        {
            title: 'Object of Columns',
            type: 'object',
            properties: {
                timestamp: {
                    type: 'object',
                    items: {title: 'TimeStamp', type: 'string', format: 'full-date', width: 200}
                },
                age: {type: 'object', items: {title: 'Age', width: 100, type: 'number'}},
                weight: {type: 'object', items: {title: 'Weight', width: 100, type: 'number'}}
            }
        },
        {
            timestamp: dates,
            age: [0, 2, 4],
            weight: [0, 1, 2]
        }
    );

    createInteractiveDemoGrid(container.appendChild(template.cloneNode(true)),
        {
            title: 'Single Column Array',
            type: 'object',
            items: {title: 'TimeStamp', width: 200, type: 'string', format: 'full-date'}
        },
        dates
    );

</script>
</body>
</html>